<section class="py-5">
  <div class="container p-3 border border-2 rounded shadow-lg">
    <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
      <!-- Sección para filtro global -->
      <div class="d-flex flex-grow-1 me-2">
        <!-- Campo de búsqueda con tamaño normal -->
        <input type="text" class="form-control me-2" placeholder="Buscar" [(ngModel)]="globalFilter"
          (input)="applyFilters()" style="flex: 2" />

        <!-- Filtro de estado -->
        <div style="flex: 1;">
          <ng-select
            [items]="stateOptions"
            [(ngModel)]="selectedStatesList"
            bindLabel="label"
            bindValue="value"
            [multiple]="true"
            placeholder="Seleccionar Estado"
            (change)="applyFilters()"
            class="w-100"
          >
          <ng-template ng-multi-label-tmp let-items="items">
            Seleccionar Estado
            <span *ngIf="items.length > 0">({{ items.length }})</span>
          </ng-template>

          <!-- Template para las opciones del dropdown -->
          <ng-template ng-option-tmp let-item="item" let-item$="item$">
            <input type="checkbox" [checked]="item$.selected" />
            {{ item.label }}
          </ng-template>
          </ng-select>
        </div>
        

        <!-- Dropdown de Proveedor con el doble de ancho -->
        <div style="flex: 1;">
          <ng-select
            [items]="providerTypeOptions"
            [(ngModel)]="selectedProviderTypesList"
            bindLabel="label"
            bindValue="value"
            [multiple]="true"
            placeholder="Tipo proveedor"
            (change)="applyFilters()"
            class="w-100"
          >
          <ng-template ng-multi-label-tmp let-items="items">
            Seleccionar Estado
            <span *ngIf="items.length > 0">({{ items.length }})</span>
          </ng-template>

          <!-- Template para las opciones del dropdown -->
          <ng-template ng-option-tmp let-item="item" let-item$="item$">
            <input type="checkbox" [checked]="item$.selected" />
            {{ item.label }}
          </ng-template>
          </ng-select>
        </div>
        
      </div>

      <!-- Botón para mostrar/ocultar filtros 
      <button class="btn btn-primary me-2" (click)="toggleFilters()">
        <i class="bi bi-funnel-fill"></i>
      </button>
      -->

      <!-- Botón para limpiar filtros -->
      <button class="btn btn-secondary me-2" (click)="cleanFilters()">
        <i class="bi bi-trash"></i>
      </button>

      <!-- Botones de exportación a Excel y PDF -->
      <button class="btn btn-success me-2" (click)="exportToExcel()">
        <i class="fa-solid bi-file-earmark-excel"></i>
      </button>
      <button class="btn btn-danger" (click)="exportToPdf()">
        <i class="fas bi-file-earmark-pdf"></i>
      </button>
    </div>

    <!-- Sección de filtros por columnas -->
    <div class="container" *ngIf="showFilters">
      <!-- Fila 1 con 4 inputs -->
      <!-- Fila 1 con 4 inputs alineados en una sola fila 
      <div class="row">
        <div class="col-md-4 mb-2"><input
          type="text"
          class="form-control"
          placeholder="Cuit"
          [(ngModel)]="columnFilters.cuit"
          (input)="applyFilters()"
        /></div>
        <div class="col-md-4 mb-2"><input
          type="text"
          class="form-control"
          placeholder="Nombre"
          [(ngModel)]="columnFilters.name"
          (input)="applyFilters()"
        /></div>
        <div class="col-md-4 mb-2"><input
          type="text"
          class="form-control"
          placeholder="Dirección"
          [(ngModel)]="columnFilters.address"
          (input)="applyFilters()"
        /></div>
          
            
          
          
        </div>

        -->
      <!-- Fila 2 con 3 inputs 
      <div class="row">
        <div class="col-md-4 mb-2">
          <input
            type="text"
            class="form-control"
            placeholder="Descripción"
            [(ngModel)]="columnFilters.description"
            (input)="applyFilters()"
          />
        </div>
        <div class="col-md-4 mb-2">
          <input
            type="text"
            class="form-control"
            placeholder="Teléfono"
            [(ngModel)]="columnFilters.phoneNumber"
            (input)="applyFilters()"
          />
        </div>
        <div class="col-md-4 mb-2">
          <input
            type="text"
            class="form-control"
            placeholder="Email"
            [(ngModel)]="columnFilters.email"
            (input)="applyFilters()"
          />
        </div>
      </div>
        -->

    </div>

    <!-- Sección de Tabla -->

    <div class="row mt-1">
      <div class="col table-responsive">
        <table 
        class="table table-striped border border-4 rounded table-hover" id="suppliersTable">
        <thead class="table-light border border-4">
            <tr>
              <th>Razon social</th>
              <th>Tipo proveedor</th>
              <th>Direccion</th>
              <th>Obra Social</th>
              <th>Descripcion</th>
              <th>Telefono</th>
              <th>Email</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let supplier of filteredSuppliers">
              <td>{{ supplier.name }}</td>
              <td>{{ supplier.supplierType | supplierType }}</td>
              <td>{{ supplier.address }}</td>
              <td>{{ supplier.cuit }}</td>
              <td>{{ supplier.description }}</td>
              <td>{{ supplier.phoneNumber }}</td>
              <td>{{ supplier.email }}</td>
              <td>
                <!-- Aquí irían los botones de acciones como editar y eliminar -->
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>




  <!-- Boton + Flotante 
  HACER MODAL
-->
  <!-- Modal de confirmación de eliminación -->
  <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">
            Confirmar eliminación
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          ¿Está seguro que desea dar de baja al proveedor seleccionado?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            Cancelar
          </button>
          <button type="button" class="btn btn-danger" (click)="confirmDelete()" data-bs-dismiss="modal">
            Eliminar
          </button>
        </div>
      </div>
    </div>
  </div>

  <button class="floating-btn btn btn-primary" routerLink="/home/create-supplier">
    <span class="bi-plus-lg"></span>
  </button>
</section>