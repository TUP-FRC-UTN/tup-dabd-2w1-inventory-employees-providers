<section class="py-5">
  <div class="container p-3 border border-2 rounded shadow-lg">
    <!-- Título del documento -->

    <form class="form">
      <!-- Modal para información adicional sobre el inventario -->
      <div
        class="modal fade"
        id="infoModal"
        tabindex="-1"
        aria-labelledby="infoModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <!-- Encabezado del modal -->
            <div class="modal-header">
              <h5 class="modal-title" id="infoModalLabel">Información</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <!-- Contenido del modal -->
            <div class="modal-body">
              Esta página de inventario te permite realizar las siguientes
              acciones:
              <ul>
                <li>
                  <strong>Visualizar el inventario completo:</strong> Observa el
                  listado de todos los productos almacenados en el inventario,
                  incluyendo detalles como su disponibilidad, estado y
                  categoría.
                </li>
                <li>
                  <strong>Filtrar productos:</strong> Usa los filtros para
                  afinar la búsqueda según:
                  <ul>
                    <li>Si el producto es <em>Reusable</em> (Sí o No).</li>
                    <li>La <em>Categoría</em> del producto.</li>
                    <li>
                      <em>Cantidad mínima</em> y <em>máxima</em>, para definir
                      el rango de cantidades.
                    </li>
                    <li><em>Nombre</em> del producto.</li>
                  </ul>
                  Además, puedes limpiar los filtros seleccionados con el botón
                  de "Limpiar filtros".
                </li>
                <li>
                  <strong>Estado de productos por categoría:</strong> Visualiza
                  un resumen del estado actual de los productos (disponibles, en
                  uso o en mantenimiento) por categoría, en la tabla de estado
                  de productos.
                </li>
                <li>
                  <strong>Exportar datos:</strong> Genera y descarga informes en
                  formato PDF o Excel para el listado de productos.
                </li>
                <li>
                  <strong>Añadir nuevos productos:</strong> Usa el botón "Nuevo"
                  para abrir el formulario de agregar producto y registrar un
                  nuevo artículo en el inventario.
                </li>
                <li>
                  <strong>Volver al menú principal:</strong> Usa el botón
                  "Volver" para regresar a la página de inicio o menú principal.
                </li>
              </ul>
            </div>
            <!-- Pie del modal con botón para cerrar -->
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Cerrar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Botones para generar PDF o Excel -->
      <div class="row mb-2">
        <!-- Sección de filtros y botones de exportación -->
        <div
          class="d-flex mb-3 justify-content-between align-items-center w-100"
        >
          <!-- Contenedor de filtros -->
          <div class="d-flex align-items-center flex-grow-1">
            <!-- Campo de Búsqueda -->
            <div class="me-3" style="min-width: 200px">
              <input
                type="text"
                id="filterInput"
                class="form-control"
                placeholder="Buscar"
                [(ngModel)]="globalFilter"
                name="globalFilter"
              />
            </div>

            <!-- Dropdown para Estado -->
            <div class="me-3" style="min-width: 160px">
              <ng-select
                [items]="estados"
                bindLabel="name"
                bindValue="value"
                [(ngModel)]="selectedEstado"
                placeholder="Seleccionar Estado"
                (change)="onEstadoChange()"
              >
              </ng-select>
            </div>

            <div class="me-3" style="min-width: 160px">
              <ng-select
                [items]="proveedores"
                bindLabel="name"
                bindValue="id"
                [(ngModel)]="selectedProveedor"
                placeholder="Seleccionar Proveedor"
              >
              </ng-select>
            </div>

            <div class="me-3" style="min-width: 160px">
              <ng-select
                [items]="categories"
                bindLabel="name"
                bindValue="id"
                [(ngModel)]="selectedCategoria"
                placeholder="Seleccionar Categoría"
              >
              </ng-select>
            </div>
          </div>

          <!-- Botones para mostrar/ocultar y limpiar filtros, exportar datos a PDF y Excel -->
          <div class="d-flex align-items-center ms-2">
            <button class="btn btn-secondary ms-2 filterbutton" (click)="cleanFilters()">
              <i class="bi bi-trash"></i>
            </button>
            <button
              class="btn btn-success ms-2 filterbutton"
              (click)="generarExcel()"
              title="Exportar a Excel"
            >
              <i class="fa-solid bi-file-earmark-excel"></i>
            </button>
            <button
              class="btn btn-danger ms-2 filterbutton"
              (click)="generarPdf()"
              title="Exportar a PDF"
            >
              <i class="fas bi-file-earmark-pdf"></i>
            </button>
          </div>
        </div>
      </div>

      <div>
        <table
          class="table table-striped border border-4 rounded table-hover"
          id="productsList"
        >
          <thead class="table-light border border-4">
            <tr>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Botones de navegación: Volver y agregar nuevo producto -->
    </form>
    <button
      class="floating-btn btn btn-primary"
      (click)="goTo('home/new-product')"
    >
      <span class="bi-plus-lg"></span>
    </button>

  </div>
</section>

<!-- Modal para Aumento de Stock -->
<div
  class="modal fade"
  id="aumentoStock"
  tabindex="-1"
  data-bs-backdrop="static"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Agregar productos a STOCK</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <!-- Componente de aumento de stock -->
        <app-iep-stock-increase
          *ngIf="showAumentoStockModal"
          (closeModal)="closeAumentoStockModal()"
        >
        </app-iep-stock-increase>
      </div>
    </div>
  </div>
</div> 
