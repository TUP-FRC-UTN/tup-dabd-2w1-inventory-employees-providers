<div class="container">
    <h2 class="text-left mb-4">Desempeño de Empleado</h2>
    <div class="row mb-3">
      <!-- Contenedor de búsqueda por nombre o desempeño -->
      <div class="col-md-4 d-flex align-items-center">
        <label for="searchTerm" class="form-label me-2">Buscar:</label>
        <input
          type="text"
          id="searchTerm"
          [(ngModel)]="searchTerm"
          placeholder="Nombre o desempeño"
          class="form-control"
        >
      </div>
  
      <!-- Selector de Año -->
      <div class="col-md-3 d-flex align-items-center">
        <label for="yearSelect" class="form-label me-2">Año:</label>
        <select id="yearSelect" [(ngModel)]="selectedYear" (change)="filterData()" class="form-control">
          <option value="">Seleccione Año</option>
          <option *ngFor="let year of availableYears" [value]="year">{{ year }}</option>
        </select>
      </div>
  
      <!-- Selector de Mes -->
      <div class="col-md-3 d-flex align-items-center">
        <label for="monthSelect" class="form-label me-2">Mes:</label>
        <select id="monthSelect" [(ngModel)]="selectedMonth" (change)="filterData()" class="form-control">
          <option value="">Seleccione Mes</option>
          <option *ngFor="let month of months; let i = index" [value]="i + 1">{{ month }}</option>
        </select>
      </div>
    </div>

      <!-- Botones de exportación alineados a la derecha -->
  <div class="row mb-3">
    <div class="col text-end">
      <button class="btn btn-success me-2" (click)="exportToExcel()">
        <i class="fa-solid fa-file-excel"></i>
      </button>
      <button class="btn btn-danger me-2" (click)="exportToPdf()">
        <i class="fas fa-file-pdf"></i>
      </button>
    </div>
  </div>
  
    <!-- Tabla de datos -->
    <table class="data-table table table-striped">
      <thead>
        <tr>
          <th (click)="sort('year')">Año {{ getSortIcon('year') }}</th>
          <th (click)="sort('month')">Mes {{ getSortIcon('month') }}</th>
          <th (click)="sort('fullName')">Empleado {{ getSortIcon('fullName') }}</th>
          <th (click)="sort('totalObservations')">Observaciones {{ getSortIcon('totalObservations') }}</th>
          <th (click)="sort('performanceType')">Desempeño {{ getSortIcon('performanceType') }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let performance of filterData()">
          <td>{{ performance.year }}</td>
          <td>{{ getMonthName(performance.month) }}</td>
          <td>{{ performance.fullName }}</td>
          <td>{{ performance.totalObservations }}</td>
          <td>
            <span [ngClass]="{
              'tag': true,
              'nueva': performance.performanceType === 'Nueva',
              'pendiente': performance.performanceType === 'Pendiente',
              'rechazada': performance.performanceType === 'Rechazada'
            }">
              {{ performance.performanceType }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  
   <!-- Botón "Registrar observación" alineado a la derecha -->
  <div class="row mt-3">
    <div class="col text-end">
      <button class="btn btn-primary" (click)="openModal()">Registrar observacion</button>
    </div>
  </div>
  
  <!-- Superposición oscura -->
  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()"></div>
  
  <div class="modal fade" tabindex="-1" [class.show]="showModal" [ngStyle]="{'display': showModal ? 'block' : 'none'}">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Llamado de Atencion</h5>
          <button type="button" class="btn-close" (click)="closeModal()" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <app-form-llamado-atencion></app-form-llamado-atencion> <!-- Aquí se incluye el componente del formulario -->
        </div>
      </div>
    </div>
  </div>
  
  




  
  