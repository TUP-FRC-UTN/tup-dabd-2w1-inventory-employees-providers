<div class="card shadow-sm border-0">
  <!-- Encabezado de la tarjeta -->
  <div class="card-header d-flex justify-content-between align-items-center bg-dark text-white">
    <h5 class="mb-0">Productos</h5>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="selectAll" [checked]="selectAll" (change)="toggleSelectAll($event)">
      <label class="form-check-label" for="selectAll">
        Seleccionar todos
      </label>
    </div>
  </div>

  <div class="card-body">
    <!-- Campo de búsqueda -->
    <div class="input-group mb-3">
      <input type="text" class="form-control" placeholder="Buscar productos" [(ngModel)]="searchTerm" (input)="filterProducts()">
      <span class="input-group-text bg-light">
        <i class="bi bi-search text-muted"></i>
      </span>
    </div>

    <!-- Tabla de productos -->
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="bg-light text-dark">
          <tr>
            <th (click)="sortBy('name')" class="sortable">
              Producto
              <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
            </th>
            <th (click)="sortBy('state.state')" class="sortable">
              Estado
              <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
            </th>
            <th (click)="sortBy('supplier.name')" class="sortable">
              Proveedor
              <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
            </th>
            <th (click)="sortBy('details.unit_price')" class="sortable">
              Precio
              <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
            </th>
            <th (click)="sortBy('details.description')" class="sortable">
              Descripción
              <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
            </th>
            <th>
              Seleccionar
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of filteredProducts">
            <td>{{ product.name }}</td>
            <td>{{ product.state.state }}</td>
            <td>{{ product.supplier.name }}</td>
            <td class="price-column">{{ product.details.unit_price | currency: 'USD':'symbol':'1.2-2' }}</td>
            <td>
              <span data-bs-toggle="tooltip" data-bs-placement="top" [attr.title]="product.details.description">
                {{ product.details.description.length > 50 ? (product.details.description | slice: 0:50) + '...' : product.details.description }}
              </span>
            </td>
            <td>
              <input type="checkbox" [(ngModel)]="product.selected" (change)="updateSelectAll()" />
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
