<!-- global-minutes-config.component.html -->
<div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <!-- Encabezado -->
        <div class="d-flex align-items-center mb-4">
          <i class="fas fa-cog text-primary fs-2"></i>
          <div class="ms-3">
            <h1 class="h4 text-dark mb-0">Configuración </h1>
          </div>
        </div>
  
        <div class="card shadow-sm p-4">
          <div class="pb-3">
            <div class="d-flex align-items-center gap-2">
              <i class="fas fa-clock text-primary"></i>
              <h2 class="h5">Política de Tolerancia</h2>
            </div>
            <p class="text-muted mt-2">
              Configure el tiempo de tolerancia global para llegadas tarde de los empleados. Esta configuración se aplicará a todos los empleados de la organización.
            </p>
          </div>
  
          <hr class="my-4"/>
  
          <form [formGroup]="configForm" (ngSubmit)="onSubmit()">
            <!-- Alerta informativa -->
            <div class="alert alert-info d-flex align-items-center mb-4" role="alert">
              <i class="fas fa-info-circle me-2"></i>
              <span class="fs-6">
                Los valores configurados aquí afectarán el cálculo de llegadas tarde para todos los empleados. Asegúrese de que este valor esté alineado con las políticas de la empresa.
              </span>
            </div>
  
            <div class="row">
              <!-- Campo de minutos -->
            <div class="mb-4 col">
              <label for="minutes" class="form-label">Tiempo de tolerancia para llegadas tarde</label>
              <div class="d-flex align-items-center gap-3">
                <input
                  id="minutes"
                  type="number"
                  formControlName="minutes"
                  class="form-control w-auto"
                  [class.is-invalid]="isFieldInvalid('minutes')"
                  min="0"
                  max="60"
                  placeholder="0-60"
                >
                <span class="text-muted">minutos</span>
              </div>
              
              <!-- Errores -->
              <div *ngIf="isFieldInvalid('minutes')" class="invalid-feedback d-block">
                <i class="fas fa-exclamation-circle"></i>
                <span *ngIf="getFieldError('minutes', 'required')">Este campo es requerido</span>
                <span *ngIf="getFieldError('minutes', 'min')">El valor mínimo es 0 minutos</span>
                <span *ngIf="getFieldError('minutes', 'max')">El valor máximo es 60 minutos</span>
              </div>
            </div>
            <!-- campo days -->
            <div class="mb-4 col">
              <label for="days" class="form-label">Dias habiles para justificar </label>
              <div class="d-flex align-items-center gap-3">
                <input
                  id="days"
                  type="number"
                  formControlName="days"
                  class="form-control w-auto"
                  [class.is-invalid]="isFieldInvalid('days')"
                  min="0"
                  max="60"
                  placeholder="0-30"
                >
                <span class="text-muted">dias</span>
              </div>
              
              <!-- Errores -->
              <div *ngIf="isFieldInvalid('days')" class="invalid-feedback d-block">
                <i class="fas fa-exclamation-circle"></i>
                <span *ngIf="getFieldError('days', 'required')">Este campo es requerido</span>
                <span *ngIf="getFieldError('days', 'min')">El valor mínimo es 0 dias</span>
                <span *ngIf="getFieldError('days', 'max')">El valor máximo es 30 dias</span>
              </div>
            </div>
            </div>
            <!-- Valor actual -->
            <div  class="alert alert-light mb-4">
              <p class="mb-0">Configuración actual:
                 <strong>{{savedValue }}  minutos</strong> de tolerancia,
                 <strong>{{savedValue }}  dias</strong> de para justificar llegadas tarde.
                </p>
            </div>
  
            <!-- Botones -->
            <div class="d-flex gap-3 text-end">
              <button 
                type="submit"
                class="btn btn-primary d-flex align-items-center gap-2"
                [disabled]="configForm.invalid || configForm.pristine"
              >
                <i class="fas fa-save"></i>
                Guardar Configuración
              </button>
             
            </div>
          </form>
  
          <!-- Mensaje de éxito -->
          <div *ngIf="successMessage" class="mt-4 alert alert-success">
            <p class="mb-0 text-success">{{successMessage}}</p>
          </div>
        </div>
  
        <!-- Card informativa -->
        <div class="card mt-4 p-4 border-dashed">
          <div class="fs-6 text-muted">
            <p class="fw-bold mb-2">¿Cómo funciona?</p>
            <ul class="list-unstyled ms-3">
              <li><i class="fas fa-check-circle"></i> Esta configuración establece el margen de tolerancia para llegadas tarde.</li>
              <li><i class="fas fa-check-circle"></i> El tiempo se aplica automáticamente al registro de entrada de todos los empleados.</li>
              <li><i class="fas fa-check-circle"></i> Los cambios tienen efecto inmediato en todo el sistema.</li>
              <li><i class="fas fa-check-circle"></i> El valor debe estar entre 0 y 60 minutos.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  