<section class="py-5">

  <div class="container p-3 border border-2 rounded shadow-lg">
  <div class="">
    <div class="">
      <!-- Fila de opciones (Filtro, Exportar, Nuevo) -->
      <div class="d-flex justify-content-between align-items-center mb-3">
        <!-- Filtro de búsqueda a la izquierda -->
        <div class="col-md-4">
          <div class="input-group">
            <input type="text" class="form-control" placeholder="Buscar..." [(ngModel)]="searchTerm" 
                   (input)="filterData($event)">
          </div>
          
        </div>

        <!-- Botones a la derecha -->
        <div>
          <button class="btn btn-secondary me-2" (click)="resetFilters()">
            <i class="bi bi-trash"></i>
          </button>
          <button class="btn btn-success me-2" (click)="exportToExcel()">
            <i class="fa-solid fa-file-excel"></i>
          </button>
          <button class="btn btn-danger me-2" (click)="exportToPdf()">
            <i class="fas fa-file-pdf"></i>
          </button>
        </div>
      </div>

      <!-- Tabla de cargos -->
      <table id="cargosTable" class="table table-striped">
        <thead>
          <tr>
            <th>Cargo</th>
            <th>Descripción</th>
            <th>Acciones</th>
          </tr>
        </thead>
      </table>
    </div>
  </div>

  
  <!-- Modal para Nuevo/Editar Cargo -->
<div class="modal fade" id="modalCargo" tabindex="-1" aria-labelledby="cargoModalLabel" [class.show]="isModalOpen"
[ngStyle]="{ display: isModalOpen ? 'block' : 'none' }">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cargoModalLabel">{{ modoEdicion ? 'Modificar Cargo' : 'Nuevo Cargo' }}</h5>
        <button type="button" class="btn-close" (click)="closeInfoModal()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Formulario del modal -->
        <form [formGroup]="cargoForm" (ngSubmit)="onSubmit()">
          <div class="mb-3">
            <label for="charge" class="form-label">Cargo</label>
            <input type="text" class="form-control" id="charge" formControlName="charge" placeholder="Ingrese el cargo">
            <div *ngIf="cargoForm.get('charge')?.invalid && cargoForm.get('charge')?.touched" class="text-danger">
              <small>El cargo es requerido y debe contener solo letras y espacios</small>
            </div>
          </div>
          <div class="mb-3">
            <label for="description" class="form-label">Descripción</label>
            <textarea class="form-control" id="description" formControlName="description" rows="3" placeholder="Ingrese la descripción del cargo"></textarea>
            <div *ngIf="cargoForm.get('description')?.invalid && cargoForm.get('description')?.touched" class="text-danger">
              <small>La descripción es requerida</small>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeInfoModal()">Cancelar</button>
            <button type="submit" class="btn btn-primary" [disabled]="cargoForm.invalid">{{ modoEdicion ? 'Actualizar' : 'Crear' }}</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Fondo oscuro del modal -->
<div *ngIf="isModalOpen" class="modal-backdrop"></div>

<!-- Modal de Información -->
<div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Información sobre la Página</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
      <div class="modal-body">
        <p>En este modal, puedes gestionar los cargos del sistema. A continuación, se detallan las funcionalidades:</p>
        <ul>
          <li><strong>Agregar Cargo:</strong> Introduce los detalles del nuevo cargo en el formulario para añadirlo al sistema.</li>
          <li><strong>Modificar Cargo:</strong> Selecciona un cargo existente, realiza las modificaciones necesarias y guarda los cambios.</li>
          <li><strong>Eliminar Cargo:</strong> Selecciona un cargo que deseas eliminar del sistema.</li>
          <li><strong>Consultar Cargos:</strong> Busca cargos por nombre o descripción utilizando el campo de búsqueda.</li>
        </ul>
        <p class="text-danger mt-3"><strong>Nota:</strong> Asegúrate de que los campos estén completos antes de proceder con las operaciones.</p>
      </div>
    </div>
  </div>
</div>

  <!-- Modal de Confirmación de Eliminación -->
  <div *ngIf="isConfirmDeleteModalOpen" class="modal" [ngClass]="{'show': isConfirmDeleteModalOpen}"
    style="display: block;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Confirmación de Eliminación</h5>
          <button type="button" class="btn-close" (click)="isConfirmDeleteModalOpen = false"></button>
        </div>
        <div class="modal-body">
          <p>¿Está seguro que desea eliminar este cargo?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger"
            (click)="selectedCargo && selectedCargo.id !== undefined && eliminarCargo(selectedCargo.id)">
            Eliminar
          </button>
          <button type="button" class="btn btn-secondary" (click)="isConfirmDeleteModalOpen = false">Cancelar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Error -->
  <div *ngIf="isErrorModalOpen" class="modal" [ngClass]="{'show': isErrorModalOpen}" style="display: block;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title text-danger">Error</h5>
          <button type="button" class="btn-close" (click)="isErrorModalOpen = false"></button>
        </div>
        <div class="modal-body">
          <p>{{ errorMessage }}</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="isErrorModalOpen = false">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
  
<!-- Botón Flotante -->
<button 
  class="floating-btn btn btn-primary" 
  data-bs-toggle="modal" 
  data-bs-target="#modalCargo"
>
  <span class="bi-plus-lg"></span>
</button>